<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Bookmarklet - Analise WebPage</title>
  </head>
  <body>
    <h2>Click and Drag in this <a href="javascript:!function(){var%20t,e,o,l,n=[];t=document.getElementsByTagName(%22div%22),e=t[0].getElementsByTagName(%22*%22);for(var%20r=0;r%3Ce.length;r++)o={prop:e[r].getAttribute(%22itemprop%22),text:e[r].textContent},n.push(o);console.log(n),l='%3Cdiv%20style=%22position:%20absolute;%20bottom:%200;%20right:%200;%20padding-bottom:%2015px;%20padding-right:%2015px;%22%3E%3Cbr/%3E%3Ch3%20style=%22color:%20crimson;%22%3EData%20from%20the%20bookmarklet:%3C/h3%3E%3Ctable%20align=right%20style=%22background:%20crimson;%20color:%20black;%22%3E%3Ctr%3E%3Cth%20align=left%3EItemProp%3C/th%3E%3Cth%20align=left%3EItemText%3C/th%3E%3C/tr%3E',n.map(function(t){l+='%3Ctr%20style=%22color:%20white;%22%3E',l+=%22%3Ctd%20align=left%3E%22+t.prop+%22%3C/td%3E%22,l+=%22%3Ctd%20align=left%3E%22+t.text+%22%3C/td%3E%22,l+=%22%3C/tr%3E%22}),l+=%22%3C/table%3E%3C/div%3E%22,console.log(l),document.getElementById(%22table%22).innerHTML=l}();">bookmarklet</a>
      to your bookmarks bar!!
    </h2>
    <h3 >Data from the page:</h3>
    <ul>
      <div itemscope itemtype="http://schema.org/ItemList">
          <span itemprop="name">Americo</span>
          <span itemprop="numberOfItems">315</span>
          <span itemprop="price">£4399</span>
          <a itemprop="url" href="https://www.google.pt/">https://www.google.pt/</a>
      </div>
    </ul>
    <ul>
      <div itemscope itemtype="http://schema.org/ItemList">
          <span itemprop="name">Ana</span>
          <span itemprop="numberOfItems">243</span>
          <span itemprop="price">£43995</span>
          <a itemprop="url" href="https://www.google.com/">https://www.google.com/</a>
      </div>
    </ul>
    <ul>
      <div itemscope itemtype="http://schema.org/ItemList">
          <span itemprop="name">Hugo</span>
          <span itemprop="numberOfItems">33</span>
          <span itemprop="price">£7399</span>
          <a itemprop="url" href="https://www.google.co.uk/">https://www.google.co.uk/</a>
      </div>
    </ul>
    <div id="table"></div>

    <script type="text/javascript">
      var divDOM, descendents, item, table;
      var items = [];
      divDOM = document.getElementsByTagName('div');
      descendents = divDOM[0].getElementsByTagName('*');
      for(var i = 0; i < descendents.length; i++) {
        item = {
          prop: descendents[i].getAttribute('itemprop'),
          text: descendents[i].textContent
        }
        items.push(item);
      }
      console.log(items);
      table = "<div style=\"position: absolute; bottom: 0; right: 0; padding-bottom: 15px; padding-right: 15px;\"><br/><h3 style=\"color: crimson;\">Data from the bookmarklet:</h3><table align=right style=\"background: crimson; color: black;\"><tr><th align=left>ItemProp</th><th align=left>ItemText</th></tr>";
      items.map( function(item) {
        table += "<tr style=\"color: white;\">";
        table += "<td align=left>" + item.prop + "</td>";
        table += "<td align=left>" + item.text + "</td>";
        table += "</tr>";
      });
      table += "</table></div>";
      console.log(table);
      document.getElementById('table').innerHTML = table;
    </script>

  </body>
</html>
